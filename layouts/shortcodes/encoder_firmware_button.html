{{ if .Get "hex" }}
{{ if .Get "oledImage" }}
<div class="oled-preview-container">
  <img src="{{ .Get "oledImage" }}" alt="{{ .Get "buttonText" }} OLED preview" class="oled-preview-image">
</div>
{{ end }}

<div class="flash-firmware">
  <button
    class="flash-button flash-button-old-bootloader"
    arduino-uploader
    hex-href='/releases/{{ .Get "hex" | safeURL }}.nanoOldBootloader.hex'
    board="nanoOldBootloader"
    [optional]verify
    [optional]port-filters='[{"usbProductId":46388,"usbVendorId":1241}]'
  >
      {{ with .Get "buttonText" }}{{ . | plainify }}{{ else -}} Upload Firmware {{ end }} to Arduino Nano (old bootloader)
      &nbsp;
      <span class="upload-progress"></span>
  </button>

  <div class="advanced-options">
    <label class="checkbox-label">
      <input type="checkbox" class="bootloader-toggle">
      <span>Show new bootloader option</span>
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="encoder-toggle">
      <span>Show reversed encoder direction</span>
    </label>
  </div>

  <button
    class="flash-button flash-button-nano"
    style="display: none;"
    arduino-uploader
    hex-href='/releases/{{ .Get "hex" | safeURL }}.nano.hex'
    board="nano"
    [optional]verify
    [optional]port-filters='[{"usbProductId":46388,"usbVendorId":1241}]'
  >
      {{ with .Get "buttonText" }}{{ . | plainify }}{{ else -}} Upload Firmware {{ end }} to Arduino Nano
      &nbsp;
      <span class="upload-progress"></span>
  </button>

  <div class="reversed-encoder-section" style="display: none;">
    <button
      class="flash-button flash-button-reversed-old"
      arduino-uploader
      hex-href='/releases/{{ .Get "hex" | safeURL }}.nanoOldBootloader.reversed.hex'
      board="nanoOldBootloader"
      [optional]verify
      [optional]port-filters='[{"usbProductId":46388,"usbVendorId":1241}]'
    >
        {{ with .Get "buttonText" }}{{ . | plainify }}{{ else -}} Upload Firmware {{ end }} to Arduino Nano (old bootloader) - Reversed
        &nbsp;
        <span class="upload-progress"></span>
    </button>
    <button
      class="flash-button flash-button-reversed"
      style="display: none;"
      arduino-uploader
      hex-href='/releases/{{ .Get "hex" | safeURL }}.nano.reversed.hex'
      board="nano"
      [optional]verify
      [optional]port-filters='[{"usbProductId":46388,"usbVendorId":1241}]'
    >
        {{ with .Get "buttonText" }}{{ . | plainify }}{{ else -}} Upload Firmware {{ end }} to Arduino Nano - Reversed
        &nbsp;
        <span class="upload-progress"></span>
    </button>
  </div>
</div>
{{ end }}
